# โปรแกรมดึงข้อมูลคุณภาพอากาศในประเทศไทย

โปรแกรมนี้ใช้สำหรับดึงข้อมูลคุณภาพอากาศในประเทศไทย โดยมีการทำงาน 2 รูปแบบ คือ
1. ดึงข้อมูลจากเว็บไซต์ AQI.in ผ่านการ Scraping
2. ดึงข้อมูลผ่าน WAQI API

## ความต้องการของระบบ

- Python 3.6 หรือใหม่กว่า
- ไลบรารีที่จำเป็น:
  ```
  pip install requests beautifulsoup4
  ```

## วิธีที่ 1: ดึงข้อมูลจากเว็บไซต์ (Web Scraping)

ไฟล์ `aqi_scraper.py` จะดึงข้อมูลคุณภาพอากาศจากเว็บไซต์ https://www.aqi.in/dashboard/thailand โดยตรง

### การทำงาน
1. ดึงข้อมูล HTML จากเว็บไซต์
2. แยกข้อมูลคุณภาพอากาศจากตาราง ประกอบด้วย:
   - AQI (ดัชนีคุณภาพอากาศ)
   - PM2.5 (ฝุ่นละอองขนาดเล็ก)
   - PM10 (ฝุ่นละอองขนาดใหญ่)
   - O3 (โอโซน)
3. บันทึกข้อมูลลงในไฟล์ JSON

### วิธีใช้งาน
```
python aqi_scraper.py
```

### ข้อดี
- ไม่จำเป็นต้องใช้ API key
- สามารถดึงข้อมูลได้โดยตรงจากเว็บไซต์

### ข้อเสีย
- หากโครงสร้างเว็บไซต์เปลี่ยน อาจทำให้โปรแกรมทำงานไม่ถูกต้อง
- อาจมีข้อจำกัดในการดึงข้อมูลหากเว็บไซต์มีการป้องกันการ scraping

## วิธีที่ 2: ดึงข้อมูลผ่าน API

ไฟล์ `aqi_api.py` จะดึงข้อมูลคุณภาพอากาศผ่าน World Air Quality Index (WAQI) API

### การทำงาน
1. เชื่อมต่อกับ WAQI API
2. ดึงข้อมูลทุกสถานีตรวจวัดในประเทศไทย
3. แยกข้อมูลสำคัญ เช่น:
   - AQI (ดัชนีคุณภาพอากาศ)
   - PM2.5 (ฝุ่นละอองขนาดเล็ก)
   - PM10 (ฝุ่นละอองขนาดใหญ่)
   - O3 (โอโซน)
   - ข้อมูลเพิ่มเติมเช่น อุณหภูมิ ความชื้น
4. บันทึกข้อมูลลงในไฟล์ JSON

### การเตรียมการก่อนใช้งาน
1. ลงทะเบียนที่ [WAQI API](https://aqicn.org/data-platform/token/) เพื่อขอรับ API key
2. แก้ไขไฟล์ `aqi_api.py` โดยใส่ API key ของคุณในบรรทัด:
   ```python
   self.api_key = api_key or "YOUR_API_KEY_HERE"
   ```

### วิธีใช้งาน
```
python aqi_api.py
```

### ข้อดี
- ข้อมูลมีความน่าเชื่อถือและเป็นทางการ
- มีข้อมูลเพิ่มเติมที่ละเอียดกว่า
- โอกาสเกิดความผิดพลาดน้อยกว่า

### ข้อเสีย
- จำเป็นต้องมี API key
- มีข้อจำกัดในการเรียกใช้งาน API ตามแผนที่ลงทะเบียน

## ผลลัพธ์

ทั้งสองวิธีจะสร้างโฟลเดอร์ `output` และบันทึกไฟล์ JSON ที่มีข้อมูลคุณภาพอากาศดังนี้:

1. ไฟล์ที่มีเวลากำกับ เช่น `air_quality_data_20240530_123045.json`
2. ไฟล์ล่าสุด เช่น `air_quality_latest.json`

## หมายเหตุ

- โปรแกรมนี้ทำงานบนพื้นฐานของข้อมูลที่เผยแพร่โดยสาธารณะ
- ควรตรวจสอบเงื่อนไขการใช้งาน API หรือเว็บไซต์ที่ดึงข้อมูลเพื่อให้เป็นไปตามข้อกำหนด 